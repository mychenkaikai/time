# 🎵 音乐播放器使用指南

## 功能特性

✅ **支持单曲和播放列表**  
✅ **完整的播放控制**（播放/暂停/上一曲/下一曲）  
✅ **三种循环模式**（列表循环/单曲循环/顺序播放）  
✅ **进度条拖动**  
✅ **音量控制和记忆**  
✅ **播放列表显示**  
✅ **最小化功能**  
✅ **浮动窗口**（固定在右下角）

---

## 使用方法

### 方式一：单曲播放（向后兼容）

```yaml
---
title: "文章标题"
media:
  bgm:
    src: "/audio/song.mp3"
    title: "歌曲名称"
    autoplay: false
---
```

### 方式二：播放列表（推荐）

```yaml
---
title: "文章标题"
media:
  bgm:
    - src: "/audio/song1.mp3"
      title: "第一首歌"
      artist: "歌手名"
    - src: "/audio/song2.mp3"
      title: "第二首歌"
      artist: "歌手名"
    - src: "/audio/song3.mp3"
      title: "第三首歌"
      artist: "歌手名"
---
```

**注意**：
- `artist` 字段是可选的
- 播放列表模式下，默认不自动播放
- 音乐文件放在 `public/audio/` 目录

---

## 播放器控制

### 按钮说明

| 按钮 | 功能 |
|------|------|
| ⏮ | 上一曲 |
| ▶ / ⏸ | 播放/暂停 |
| ⏭ | 下一曲 |
| 🔁 | 循环模式切换 |
| _ | 最小化/展开 |

### 循环模式

1. **🔁 列表循环**（默认）- 播放完所有歌曲后重新开始
2. **🔂 单曲循环** - 重复播放当前歌曲
3. **➡️ 顺序播放** - 播放完所有歌曲后停止

### 其他功能

- **进度条**：拖动可跳转到指定位置
- **音量滑块**：调节音量（0-100%）
- **播放列表**：点击歌曲可直接播放
- **最小化**：点击标题栏的 `_` 按钮

---

## 示例

### 示例 1：单曲播放

```yaml
---
title: "童年的动画片"
media:
  bgm:
    src: "/audio/childhood-theme.mp3"
    title: "童年主题曲"
    autoplay: false
---
```

### 示例 2：多首歌曲

```yaml
---
title: "那些年的流行歌曲"
media:
  bgm:
    - src: "/audio/song1.mp3"
      title: "简单爱"
      artist: "周杰伦"
    - src: "/audio/song2.mp3"
      title: "天黑黑"
      artist: "孙燕姿"
    - src: "/audio/song3.mp3"
      title: "温柔"
      artist: "五月天"
---
```

---

## 文件准备

### 1. 准备音乐文件

将音乐文件放到 `public/audio/` 目录：

```
public/
└── audio/
    ├── song1.mp3
    ├── song2.mp3
    └── song3.mp3
```

### 2. 支持的格式

- ✅ MP3（推荐）
- ✅ OGG
- ✅ WAV
- ✅ AAC

### 3. 文件大小建议

- 单曲：< 10MB
- 使用合适的比特率（128-320 kbps）

---

## 技术细节

### 使用的库

- **Howler.js** - 专业的音频播放库
- 支持流式播放（`html5: true`）
- 自动处理浏览器兼容性

### 浏览器限制

⚠️ **自动播放限制**：
- 现代浏览器通常会阻止自动播放音频
- 建议设置 `autoplay: false`
- 让用户手动点击播放按钮

### 音量记忆

- 音量设置保存在 `localStorage`
- 刷新页面后保持上次的音量

---

## 样式定制

播放器会自动适应当前主题：

- **Retro Web** - 简洁的边框样式
- **Windows 98** - 经典的 Win98 窗口
- **Windows XP** - Luna 配色
- **Mac OS 9** - Platinum 风格

---

## 常见问题

### Q: 为什么音乐不自动播放？

A: 浏览器的自动播放策略限制。用户需要先与页面交互（点击）才能播放音频。

### Q: 可以添加多少首歌曲？

A: 理论上没有限制，但建议不超过 20 首，以保持良好的用户体验。

### Q: 播放器可以拖动吗？

A: 当前版本固定在右下角。如需拖动功能，可以后续添加。

### Q: 支持在线音乐链接吗？

A: 支持，但需要注意跨域问题（CORS）。建议使用本地文件。

---

## 更新日志

**v2.0** (2024-01-22)
- ✅ 支持播放列表
- ✅ 添加上一曲/下一曲按钮
- ✅ 三种循环模式
- ✅ 进度条拖动
- ✅ 最小化功能
- ✅ 播放列表显示和点击切换
- ✅ 向后兼容单曲模式

**v1.0** (2024-01-19)
- ✅ 基础播放/暂停功能
- ✅ 音量控制
- ✅ 时间显示

---

**祝您使用愉快！** 🎵✨

