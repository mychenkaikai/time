---
/**
 * BilibiliVideo - B站视频嵌入组件
 * 用于在文章中嵌入 B站视频
 */

interface Props {
  bvid: string;  // B站视频的 BV号
  title?: string;  // 视频标题（可选）
  width?: string;  // 宽度，默认 100%
  height?: string;  // 高度，默认 500px
}

const { 
  bvid, 
  title = 'B站视频',
  width = '100%',
  height = '500'
} = Astro.props;

const videoUrl = `//player.bilibili.com/player.html?bvid=${bvid}&high_quality=1&danmaku=0`;
---

<div class="bilibili-video">
  {title && <h3 class="video-title">{title}</h3>}
  <div class="video-container">
    <iframe 
      src={videoUrl}
      allowfullscreen
      style={`width: ${width}; height: ${height}px;`}
      title={title}
    ></iframe>
  </div>
</div>

<style>
  .bilibili-video {
    margin: var(--spacing-lg) 0;
  }

  .video-title {
    margin-bottom: var(--spacing-sm);
    color: var(--text-color);
  }

  .video-container {
    position: relative;
    width: 100%;
    background: #000;
    border: 2px solid var(--border-dark);
    box-shadow: var(--window-shadow);
  }

  .video-container iframe {
    display: block;
    border: none;
  }

  /* 响应式 */
  @media (max-width: 768px) {
    .video-container iframe {
      height: 300px !important;
    }
  }
</style>

